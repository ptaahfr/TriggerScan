<html>
<head>
    <title>TriggerScan</title>
    <script>
        function onLoad() {
            var source = new EventSource("/status");
            source.onmessage = function (e) {
                document.getElementById("status").textContent = e.data;
                if (e.data.includes("Scanned")) {
                    document.getElementById("lastproduction").src = "/lastproduction#" + new Date();
                }
            };
        };

        function startScan()
        {
            var xhttp = new XMLHttpRequest();
            xhttp.open("GET", "/scan");
            xhttp.send();
        }
    </script>
    <style>
        body * {
            width: 80%;
            display: block;
            margin: auto;
        }
        button {
            font-size: 12vmin;
        }
    </style>
</head>
<body onload="onLoad();">
    <button id="starter" onclick="startScan();">Start Scan</button>
    <br>
    <span id="status"></span>
    <br>
    <img id="lastproduction">
</body>
</html>